function updateUI() {
            updateTaskList();
            updateTaskProgress();
            updateHabitList();
            updateTimerDisplay();
            updatePomodoroDotsDisplay();
            updateStats();
            updateNotesDisplay();
            updateAchievementDisplay();
            updateMoodDisplay();
            resetDailyCounters();
        }

        // Notes functionality
        function saveNote() {
            const input = document.getElementById('notes-input');
            const noteText = input.value.trim();
            
            if (noteText) {
                const note = {
                    id: Date.now(),
                    text: noteText,
                    createdAt: new Date()
                };
                appState.notes.unshift(note); // Add to beginning
                input.value = '';
                updateNotesDisplay();
                saveData();
                showCelebration("Note saved! üìù");
            }
        }

        function deleteNote(noteId) {
            appState.notes = appState.notes.filter(n => n.id !== noteId);
            updateNotesDisplay();
            saveData();
        }

        function clearNotes() {
            if (appState.notes.length > 0 && confirm('Are you sure you want to clear all notes?')) {
                appState.notes = [];
                updateNotesDisplay();
                saveData();
            }
        }

        function updateNotesDisplay() {
            const notesContainer = document.getElementById('saved-notes');
            notesContainer.innerHTML = '';
            
            if (appState.notes.length === 0) {
                notesContainer.innerHTML = '<div style="text-align: center; color: var(--text-secondary); font-size: 14px; padding: 20px;">No notes yet. Add your first note above! ‚úèÔ∏è</div>';
                return;
            }
            
            appState.notes.slice(0, 3).forEach(note => { // Show only last 3 notes
                const noteDiv = document.createElement('div');
                noteDiv.style.cssText = `
                    background: var(--bg-secondary);
                    padding: 10px;
                    border-radius: 8px;
                    margin-bottom: 8px;
                    font-size: 14px;
                    position: relative;
                `;
                
                const noteDate = new Date(note.createdAt).toLocaleDateString();
                noteDiv.innerHTML = `
                    <div style="color: var(--text-secondary); font-size: 11px; margin-bottom: 5px;">${noteDate}</div>
                    <div style="margin-bottom: 10px;">${note.text}</div>
                    <button onclick="deleteNote(${note.id})" style="
                        position: absolute;
                        top: 5px;
                        right: 5px;
                        background: var(--danger);
                        color: white;
                        border: none;
                        border-radius: 4px;
                        padding: 2px 6px;
                        font-size: 10px;
                        cursor: pointer;
                    ">√ó</button>
                `;
                notesContainer.appendChild(noteDiv);
            });
            
            if (appState.notes.length > 3) {
                const moreDiv = document.createElement('div');
                moreDiv.style.cssText = 'text-align: center; color: var(--text-secondary); font-size: 12px; padding: 10px;';
                moreDiv.textContent = `+${appState.notes.length - 3} more notes`;
                notesContainer.appendChild(moreDiv);
            }
        }

        // Mood functionality
        function setMood(mood) {
            appState.currentMood = mood;
            updateMoodDisplay();
            saveData();
            showCelebration(`Mood set to ${mood}! Have a great day! üòä`);
        }

        function updateMoodDisplay() {
            const moodDisplay = document.getElementById('current-mood');
            if (appState.currentMood) {
                moodDisplay.textContent = `Today's mood: ${appState.currentMood}`;
            } else {
                moodDisplay.textContent = 'Set your mood for today!';
            }
        }

        // Achievement system
        function checkAchievements() {
            const achievements = [
                {
                    key: 'firstTask',
                    condition: () => appState.stats.completedTasks >= 1,
                    badge: 'üéØ',
                    title: 'First Steps<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border: #e5e7eb;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #475569;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }

        .nav {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-btn {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            color: var(--text-primary);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .dark-toggle {
            background: var(--bg-secondary);
            border: none;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: transform 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .task-input input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
        }

        .btn {
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-danger {
            background: var(--danger);
        }

        .task-list {
            list-style: none;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            margin-bottom: 8px;
            background: var(--bg-secondary);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .task-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .task-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .timer {
            text-align: center;
        }

        .timer-display {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            color: var(--primary);
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
        }

        .habit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .habit-streak {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .quote-widget {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 15px;
        }

        .quote-text {
            font-style: italic;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .quote-author {
            opacity: 0.8;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 5px;
        }

        .chart-container {
            height: 300px;
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            margin: 20px;
        }

        .celebration {
            font-size: 48px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                gap: 15px;
            }
            .nav {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">üìä Productivity Dashboard</div>
            <nav class="nav">
                <button class="nav-btn active" onclick="showPage('dashboard')">Dashboard</button>
                <button class="nav-btn" onclick="showPage('stats')">Statistics</button>
                <button class="nav-btn" onclick="showPage('about')">About</button>
                <button class="dark-toggle" onclick="toggleDarkMode()">üåô</button>
            </nav>
        </header>

        <div id="dashboard-page" class="page active">
            <div class="dashboard">
                <!-- Daily Goals Tracker -->
                <div class="card">
                    <h3>üéØ Daily Goals</h3>
                    <div class="task-input">
                        <input type="text" id="task-input" placeholder="Add a new goal..." onkeypress="handleTaskInput(event)">
                        <select id="task-priority" style="padding: 12px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); margin-right: 10px;">
                            <option value="low">üü¢ Low</option>
                            <option value="medium">üü° Medium</option>
                            <option value="high">üî¥ High</option>
                        </select>
                        <button class="btn" onclick="addTask()">Add</button>
                    </div>
                    <ul class="task-list" id="task-list"></ul>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; font-size: 12px; color: var(--text-secondary);">
                        <span>Completed: <span id="task-progress">0/0</span></span>
                        <span>Today's Focus: <span id="daily-focus">0%</span></span>
                    </div>
                </div>

                <!-- Study Timer -->
                <div class="card">
                    <h3>üçÖ Study Timer</h3>
                    <div class="timer">
                        <div class="timer-display" id="timer-display">25:00</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="timer-progress"></div>
                        </div>
                        <div class="timer-controls">
                            <button class="btn" onclick="startTimer()">Start</button>
                            <button class="btn btn-secondary" onclick="pauseTimer()">Pause</button>
                            <button class="btn btn-danger" onclick="resetTimer()">Reset</button>
                        </div>
                        <div>
                            <label>
                                <input type="radio" name="timer-mode" value="pomodoro" checked> 
                                Pomodoro (25min)
                            </label>
                            <label style="margin-left: 15px;">
                                <input type="radio" name="timer-mode" value="break"> 
                                Break (5min)
                            </label>
                        </div>
                        <div style="margin-top: 15px; text-align: center;">
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 5px;">Today's Sessions</div>
                            <div style="display: flex; justify-content: center; gap: 5px;" id="pomodoro-dots"></div>
                        </div>
                    </div>
                </div>

                <!-- Quick Notes -->
                <div class="card">
                    <h3>üìù Quick Notes</h3>
                    <div style="margin-bottom: 15px;">
                        <textarea id="notes-input" placeholder="Jot down your thoughts, ideas, or reminders..." 
                                  style="width: 100%; min-height: 100px; padding: 12px; border: 2px solid var(--border); 
                                         border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); 
                                         resize: vertical; font-family: inherit;"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button class="btn" onclick="saveNote()" style="flex: 1;">üíæ Save Note</button>
                        <button class="btn btn-secondary" onclick="clearNotes()" style="flex: 1;">üóëÔ∏è Clear</button>
                    </div>
                    <div id="saved-notes" style="max-height: 200px; overflow-y: auto;"></div>
                </div>

                <!-- Weather Widget -->
                <div class="card">
                    <h3>üå§Ô∏è Weather & Mood</h3>
                    <div id="weather-content" style="text-align: center;">
                        <div style="font-size: 48px; margin: 10px 0;" id="weather-icon">‚òÄÔ∏è</div>
                        <div style="font-size: 24px; font-weight: bold; margin-bottom: 10px;" id="weather-temp">22¬∞C</div>
                        <div style="color: var(--text-secondary); margin-bottom: 20px;" id="weather-desc">Perfect for productivity!</div>
                        <div style="margin-top: 20px;">
                            <div style="font-size: 14px; margin-bottom: 10px; color: var(--text-secondary);">How are you feeling today?</div>
                            <div style="display: flex; justify-content: space-around; gap: 5px;">
                                <button onclick="setMood('üòÑ')" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">üòÑ</button>
                                <button onclick="setMood('üòä')" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">üòä</button>
                                <button onclick="setMood('üòê')" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">üòê</button>
                                <button onclick="setMood('üòî')" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">üòî</button>
                                <button onclick="setMood('üí™')" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-secondary)'" onmouseout="this.style.background='none'">üí™</button>
                            </div>
                            <div id="current-mood" style="margin-top: 10px; font-size: 14px; color: var(--text-secondary);"></div>
                        </div>
                    </div>
                </div>

                <!-- Habit Tracker -->
                <div class="card">
                    <h3>‚úÖ Habit Tracker</h3>
                    <div class="task-input">
                        <input type="text" id="habit-input" placeholder="Add a new habit..." onkeypress="handleHabitInput(event)">
                        <button class="btn" onclick="addHabit()">Add</button>
                    </div>
                    <div id="habit-list"></div>
                </div>

                <!-- Daily Achievement Badge -->
                <div class="card">
                    <h3>üèÜ Today's Achievement</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div id="achievement-badge" style="font-size: 64px; margin-bottom: 15px;">üéØ</div>
                        <div id="achievement-title" style="font-size: 18px; font-weight: bold; color: var(--primary); margin-bottom: 10px;">Getting Started</div>
                        <div id="achievement-desc" style="font-size: 14px; color: var(--text-secondary); margin-bottom: 15px;">Complete your first task to unlock achievements!</div>
                        <div class="progress-bar" style="margin: 15px 0;">
                            <div class="progress-fill" id="achievement-progress" style="width: 0%;"></div>
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            <span id="achievement-current">0</span> / <span id="achievement-target">1</span>
                        </div>
                    </div>
                </div>

                <!-- Quote Widget -->
                <div class="card">
                    <div class="quote-widget" id="quote-widget">
                        <div class="quote-text" id="quote-text">"The future depends on what you do today."</div>
                        <div class="quote-author" id="quote-author">- Mahatma Gandhi</div>
                        <button class="btn" onclick="newQuote()" style="margin-top: 15px; background: rgba(255,255,255,0.2);">New Quote</button>
                    </div>
                </div>

                <!-- Focus Music Player -->
                <div class="card">
                    <h3>üéµ Focus Sounds</h3>
                    <div style="text-align: center;">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px;">
                            <button onclick="playFocusSound('rain')" style="padding: 15px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='var(--border)'">
                                üåßÔ∏è<br><span style="font-size: 12px;">Rain</span>
                            </button>
                            <button onclick="playFocusSound('forest')" style="padding: 15px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='var(--border)'">
                                üå≤<br><span style="font-size: 12px;">Forest</span>
                            </button>
                            <button onclick="playFocusSound('ocean')" style="padding: 15px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='var(--border)'">
                                üåä<br><span style="font-size: 12px;">Ocean</span>
                            </button>
                            <button onclick="playFocusSound('coffee')" style="padding: 15px; background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='var(--border)'">
                                ‚òï<br><span style="font-size: 12px;">Caf√©</span>
                            </button>
                        </div>
                        <div id="current-sound" style="font-size: 14px; color: var(--text-secondary); margin-bottom: 10px;">No sound playing</div>
                        <button class="btn btn-danger" onclick="stopFocusSound()" style="width: 100%;">‚èπÔ∏è Stop Sound</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="stats-page" class="page">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-study-time">0</div>
                    <div class="stat-label">Hours Studied Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-tasks">0</div>
                    <div class="stat-label">Tasks Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="habit-streak">0</div>
                    <div class="stat-label">Best Habit Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="productivity-score">0%</div>
                    <div class="stat-label">Productivity Score</div>
                </div>
            </div>
            
            <div class="chart-container">
                <div style="text-align: center; color: var(--text-secondary);">
                    <h3>üìà Study Time This Week</h3>
                    <div id="weekly-study-chart" style="margin-top: 20px; font-size: 14px;">
                        <div id="weekly-bars" style="display: flex; justify-content: space-around; align-items: end; height: 150px; margin: 20px 0;">
                            <!-- Weekly bars will be generated here -->
                        </div>
                        <div id="weekly-data">
                            <!-- Weekly data will be shown here -->
                        </div>
                    </div>
                    <div style="margin-top: 20px; padding: 20px; background: var(--bg-secondary); border-radius: 8px;">
                        <strong id="weekly-average">Weekly Average: 0.0 hours/day</strong><br>
                        <span id="weekly-improvement" style="color: var(--secondary);"></span>
                    </div>
                </div>
            </div>
        </div>

        <div id="about-page" class="page">
            <div class="card" style="max-width: 800px; margin: 0 auto;">
                <h2 style="text-align: center; color: var(--primary); margin-bottom: 30px; font-size: 28px;">
                    üöÄ About Productivity Dashboard
                </h2>
                
                <div style="text-align: center; margin-bottom: 40px;">
                    <div style="font-size: 60px; margin-bottom: 20px;">üìä‚ú®</div>
                    <p style="font-size: 18px; color: var(--text-secondary); line-height: 1.8;">
                        Empowering your journey to peak productivity and personal growth
                    </p>
                </div>

                <div style="margin-bottom: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">üéØ Our Mission</h3>
                    <p style="line-height: 1.8; margin-bottom: 20px;">
                        We believe that productivity isn't just about doing more‚Äîit's about doing what matters most. 
                        Our dashboard is designed to be your personal command center for building better habits, 
                        achieving your goals, and creating a life you're proud of.
                    </p>
                    <p style="line-height: 1.8;">
                        Whether you're a student preparing for exams, a professional working on projects, or someone 
                        simply looking to build better daily routines, we're here to support your journey with 
                        intuitive tools and motivational insights.
                    </p>
                </div>

                <div style="margin-bottom: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">‚ö° Why We Built This</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px;">
                        <div style="padding: 20px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; margin-bottom: 15px;">üéØ</div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">Focus</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Help you concentrate on what truly matters with distraction-free tools
                            </p>
                        </div>
                        <div style="padding: 20px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; margin-bottom: 15px;">üìà</div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">Growth</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Track your progress and celebrate every milestone along your journey
                            </p>
                        </div>
                        <div style="padding: 20px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; margin-bottom: 15px;">üí™</div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">Motivation</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Keep you inspired with achievements, streaks, and uplifting messages
                            </p>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">üõ†Ô∏è What Makes Us Different</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 25px;">
                        <div>
                            <h4 style="color: var(--secondary); margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span style="background: var(--secondary); color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px;">‚úì</span>
                                All-in-One Solution
                            </h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Tasks, habits, time tracking, and motivation‚Äîeverything in one beautiful interface
                            </p>
                        </div>
                        <div>
                            <h4 style="color: var(--secondary); margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span style="background: var(--secondary); color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px;">‚úì</span>
                                Science-Based
                            </h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Built on proven techniques like the Pomodoro method and habit stacking
                            </p>
                        </div>
                        <div>
                            <h4 style="color: var(--secondary); margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span style="background: var(--secondary); color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px;">‚úì</span>
                                Beautiful Design
                            </h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Clean, modern interface that's as pleasant to use as it is powerful
                            </p>
                        </div>
                        <div>
                            <h4 style="color: var(--secondary); margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                <span style="background: var(--secondary); color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px;">‚úì</span>
                                Privacy First
                            </h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">
                                Your data stays with you‚Äîwe believe in keeping your productivity journey private
                            </p>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">üåü Our Values</h3>
                    <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 30px; border-radius: 15px; color: white; text-align: center;">
                        <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                            <div>
                                <div style="font-size: 24px; margin-bottom: 10px;">üéØ</div>
                                <strong>Simplicity</strong>
                                <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Clean and intuitive</p>
                            </div>
                            <div>
                                <div style="font-size: 24px; margin-bottom: 10px;">üíé</div>
                                <strong>Quality</strong>
                                <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Built to last</p>
                            </div>
                            <div>
                                <div style="font-size: 24px; margin-bottom: 10px;">ü§ù</div>
                                <strong>Support</strong>
                                <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Always here to help</p>
                            </div>
                            <div>
                                <div style="font-size: 24px; margin-bottom: 10px;">üöÄ</div>
                                <strong>Innovation</strong>
                                <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Constantly improving</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; padding: 30px; background: var(--bg-secondary); border-radius: 15px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">üéâ Ready to Transform Your Productivity?</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        Join thousands of users who've already made productivity a part of their daily routine
                    </p>
                    <button class="btn" onclick="showPage('dashboard')" style="padding: 15px 30px; font-size: 16px;">
                        Get Started Now üöÄ
                    </button>
                </div>

                <div style="margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px; text-align: center;">üë®‚Äçüíª Meet the Creator</h3>
                    <div style="background: var(--bg-secondary); padding: 30px; border-radius: 15px; text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üöÄ</div>
                        <h4 style="color: var(--primary); font-size: 20px; margin-bottom: 10px;">Shiven Prasad</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; line-height: 1.6;">
                            Passionate developer and productivity enthusiast who believes in the power of 
                            well-designed tools to transform daily routines and unlock human potential.
                        </p>
                        <div style="display: flex; justify-content: center; align-items: center; gap: 15px; flex-wrap: wrap;">
                            <span style="color: var(--text-secondary); font-size: 14px;">Get in touch:</span>
                            <a href="mailto:prasadshiven034@gmail.com" style="
                                display: inline-flex; 
                                align-items: center; 
                                gap: 8px; 
                                padding: 10px 20px; 
                                background: var(--primary); 
                                color: white; 
                                text-decoration: none; 
                                border-radius: 25px; 
                                font-size: 14px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(99, 102, 241, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                üìß prasadshiven034@gmail.com
                            </a>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid var(--border);">
                    <p style="color: var(--text-secondary); font-size: 14px;">
                        Built with ‚ù§Ô∏è by Shiven Prasad for productivity enthusiasts everywhere<br>
                        <span style="font-size: 12px;">Version 1.0 | Made with modern web technologies</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Celebration Modal -->
    <div class="modal" id="celebration-modal">
        <div class="modal-content">
            <div class="celebration">üéâ</div>
            <h3>Congratulations!</h3>
            <p id="celebration-message">Great job completing your task!</p>
            <button class="btn" onclick="closeCelebration()">Continue</button>
        </div>
    </div>

    <script>
        // Application state
        let appState = {
            tasks: [],
            habits: [],
            timer: {
                minutes: 25,
                seconds: 0,
                isRunning: false,
                isPomodoro: true,
                totalTime: 25 * 60,
                interval: null
            },
            stats: {
                studyTime: 0,
                completedTasks: 0,
                bestStreak: 0,
                pomodoroSessions: 0,
                dailyStudyTimes: {},
                todaysPomodoroSessions: 0
            },
            darkMode: false,
            notes: [],
            currentMood: null,
            achievements: {
                firstTask: false,
                fivePomodoros: false,
                weekStreak: false,
                perfectDay: false
            },
            focusSound: {
                current: null,
                audio: null
            }
        };

        // Motivational quotes
        const quotes = [
            { text: "The future depends on what you do today.", author: "Mahatma Gandhi" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "The secret of getting ahead is getting started.", author: "Mark Twain" },
            { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" }
        ];

        // Utility functions for localStorage
        function saveToLocalStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        function loadFromLocalStorage(key) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            } catch (error) {
                console.error('Error loading from localStorage:', error);
                return null;
            }
        }

        // Get date string for tracking daily data
        function getDateString(date = new Date()) {
            return date.toISOString().split('T')[0];
        }

        // Get week dates for chart
        function getWeekDates() {
            const dates = [];
            const today = new Date();
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                dates.push(date);
            }
            return dates;
        }

        // Update weekly study chart
        function updateWeeklyChart() {
            const weekDates = getWeekDates();
            const weeklyBars = document.getElementById('weekly-bars');
            const weeklyData = document.getElementById('weekly-data');
            
            weeklyBars.innerHTML = '';
            
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            let weeklyDataText = '';
            let totalWeeklyTime = 0;
            const maxTime = 5; // Max hours for scaling bars
            
            weekDates.forEach((date, index) => {
                const dateString = getDateString(date);
                const dayTime = appState.stats.dailyStudyTimes[dateString] || 0;
                totalWeeklyTime += dayTime;
                
                const barHeight = maxTime > 0 ? (dayTime / maxTime) * 100 : 0;
                const dayName = dayNames[date.getDay()];
                
                // Create bar
                const bar = document.createElement('div');
                bar.style.cssText = `
                    width: 30px;
                    height: ${barHeight}%;
                    background: linear-gradient(to top, var(--primary), var(--secondary));
                    border-radius: 4px 4px 0 0;
                    margin: 0 5px;
                    position: relative;
                    min-height: 5px;
                `;
                
                const barContainer = document.createElement('div');
                barContainer.style.cssText = `
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    height: 100%;
                    justify-content: end;
                `;
                
                const label = document.createElement('div');
                label.style.cssText = `
                    font-size: 12px;
                    margin-top: 5px;
                    color: var(--text-secondary);
                `;
                label.textContent = dayName;
                
                barContainer.appendChild(bar);
                barContainer.appendChild(label);
                weeklyBars.appendChild(barContainer);
                
                weeklyDataText += `${dayName}: ${dayTime.toFixed(1)}h${index < weekDates.length - 1 ? ' | ' : ''}`;
            });
            
            weeklyData.innerHTML = weeklyDataText || 'No study data yet';
            
            const weeklyAverage = totalWeeklyTime / 7;
            document.getElementById('weekly-average').textContent = `Weekly Average: ${weeklyAverage.toFixed(1)} hours/day`;
            
            // Show improvement or encouragement message
            const improvementEl = document.getElementById('weekly-improvement');
            if (totalWeeklyTime > 0) {
                improvementEl.textContent = "Keep up the great work! üéØ";
            } else {
                improvementEl.textContent = "Start your first study session to see progress! üöÄ";
            }
        }

        // Initialize app
        function init() {
            loadData();
            updateUI();
            displayRandomQuote();
            updateStats();
            updateWeeklyChart();
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(pageId + '-page').classList.add('active');
            event.target.classList.add('active');
            
            if (pageId === 'stats') {
                updateWeeklyChart();
            }
        }

        // Dark mode toggle
        function toggleDarkMode() {
            appState.darkMode = !appState.darkMode;
            document.body.setAttribute('data-theme', appState.darkMode ? 'dark' : 'light');
            document.querySelector('.dark-toggle').textContent = appState.darkMode ? '‚òÄÔ∏è' : 'üåô';
            saveData();
        }

        // Task management
        function addTask() {
            const input = document.getElementById('task-input');
            const prioritySelect = document.getElementById('task-priority');
            const taskText = input.value.trim();
            const priority = prioritySelect.value;
            
            if (taskText) {
                const task = {
                    id: Date.now(),
                    text: taskText,
                    priority: priority,
                    completed: false,
                    createdAt: new Date()
                };
                appState.tasks.push(task);
                input.value = '';
                prioritySelect.value = 'low';
                updateTaskList();
                updateTaskProgress();
                saveData();
            }
        }

        function handleTaskInput(event) {
            if (event.key === 'Enter') {
                addTask();
            }
        }

        function toggleTask(taskId) {
            const task = appState.tasks.find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                if (task.completed) {
                    appState.stats.completedTasks++;
                    checkAchievements();
                    showCelebration("Task completed! Keep up the great work! üéØ");
                } else {
                    appState.stats.completedTasks--;
                }
                updateTaskList();
                updateTaskProgress();
                updateStats();
                saveData();
            }
        }

        function deleteTask(taskId) {
            appState.tasks = appState.tasks.filter(t => t.id !== taskId);
            updateTaskList();
            updateTaskProgress();
            saveData();
        }

        function updateTaskList() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = '';

            // Sort tasks by priority (high, medium, low) then by completion status
            const sortedTasks = [...appState.tasks].sort((a, b) => {
                if (a.completed !== b.completed) {
                    return a.completed - b.completed; // Incomplete tasks first
                }
                const priorityOrder = { high: 3, medium: 2, low: 1 };
                return priorityOrder[b.priority] - priorityOrder[a.priority];
            });

            sortedTasks.forEach(task => {
                const li = document.createElement('li');
                li.className = `task-item ${task.completed ? 'completed' : ''}`;
                
                const priorityIcon = {
                    high: 'üî¥',
                    medium: 'üü°', 
                    low: 'üü¢'
                };
                
                li.innerHTML = `
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} 
                           onchange="toggleTask(${task.id})">
                    <span>${priorityIcon[task.priority]} ${task.text}</span>
                    <button class="btn btn-danger" style="margin-left: auto; padding: 5px 10px; font-size: 12px;" 
                            onclick="deleteTask(${task.id})">Delete</button>
                `;
                taskList.appendChild(li);
            });
        }

        function updateTaskProgress() {
            const completedTasks = appState.tasks.filter(t => t.completed).length;
            const totalTasks = appState.tasks.length;
            const progressPercent = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
            
            document.getElementById('task-progress').textContent = `${completedTasks}/${totalTasks}`;
            document.getElementById('daily-focus').textContent = `${Math.round(progressPercent)}%`;
        }

        // Timer functionality
        function startTimer() {
            if (!appState.timer.isRunning) {
                appState.timer.isRunning = true;
                appState.timer.interval = setInterval(updateTimer, 1000);
            }
        }

        function pauseTimer() {
            appState.timer.isRunning = false;
            if (appState.timer.interval) {
                clearInterval(appState.timer.interval);
            }
        }

        function resetTimer() {
            pauseTimer();
            const mode = document.querySelector('input[name="timer-mode"]:checked').value;
            appState.timer.minutes = mode === 'pomodoro' ? 25 : 5;
            appState.timer.seconds = 0;
            appState.timer.totalTime = (mode === 'pomodoro' ? 25 : 5) * 60;
            updateTimerDisplay();
        }

        function updateTimer() {
            if (appState.timer.seconds === 0) {
                if (appState.timer.minutes === 0) {
                    timerComplete();
                    return;
                }
                appState.timer.minutes--;
                appState.timer.seconds = 59;
            } else {
                appState.timer.seconds--;
            }
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const display = document.getElementById('timer-display');
            const progress = document.getElementById('timer-progress');
            
            const totalSeconds = appState.timer.minutes * 60 + appState.timer.seconds;
            const progressPercent = ((appState.timer.totalTime - totalSeconds) / appState.timer.totalTime) * 100;
            
            display.textContent = `${appState.timer.minutes.toString().padStart(2, '0')}:${appState.timer.seconds.toString().padStart(2, '0')}`;
            progress.style.width = progressPercent + '%';
        }

        function timerComplete() {
            pauseTimer();
            const mode = document.querySelector('input[name="timer-mode"]:checked').value;
            
            if (mode === 'pomodoro') {
                appState.stats.pomodoroSessions++;
                appState.stats.todaysPomodoroSessions++;
                const studyTimeToAdd = 25 / 60; // 25 minutes in hours
                appState.stats.studyTime += studyTimeToAdd;
                
                // Add to daily study time
                const today = getDateString();
                if (!appState.stats.dailyStudyTimes[today]) {
                    appState.stats.dailyStudyTimes[today] = 0;
                }
                appState.stats.dailyStudyTimes[today] += studyTimeToAdd;
                
                updatePomodoroDotsDisplay();
                checkAchievements();
                showCelebration("Pomodoro session complete! Time for a break! üçÖ");
            } else {
                showCelebration("Break time over! Ready for another productive session? ‚ö°");
            }
            
            updateStats();
            saveData();
        }

        function updatePomodoroDotsDisplay() {
            const dotsContainer = document.getElementById('pomodoro-dots');
            dotsContainer.innerHTML = '';
            
            for (let i = 0; i < Math.min(appState.stats.todaysPomodoroSessions, 10); i++) {
                const dot = document.createElement('div');
                dot.style.cssText = `
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                    background: var(--secondary);
                    display: inline-block;
                `;
                dotsContainer.appendChild(dot);
            }
            
            if (appState.stats.todaysPomodoroSessions > 10) {
                const moreText = document.createElement('span');
                moreText.style.cssText = 'font-size: 12px; color: var(--text-secondary); margin-left: 5px;';
                moreText.textContent = `+${appState.stats.todaysPomodoroSessions - 10}`;
                dotsContainer.appendChild(moreText);
            }
        }

        // Habit management
        function addHabit() {
            const input = document.getElementById('habit-input');
            const habitText = input.value.trim();
            
            if (habitText) {
                const habit = {
                    id: Date.now(),
                    text: habitText,
                    streak: 0,
                    lastCompleted: null,
                    createdAt: new Date()
                };
                appState.habits.push(habit);
                input.value = '';
                updateHabitList();
                saveData();
            }
        }

        function handleHabitInput(event) {
            if (event.key === 'Enter') {
                addHabit();
            }
        }

        function completeHabit(habitId) {
            const habit = appState.habits.find(h => h.id === habitId);
            if (habit) {
                const today = new Date().toDateString();
                const lastCompleted = habit.lastCompleted ? new Date(habit.lastCompleted).toDateString() : null;
                
                if (lastCompleted !== today) {
                    habit.streak++;
                    habit.lastCompleted = new Date();
                    
                    if (habit.streak > appState.stats.bestStreak) {
                        appState.stats.bestStreak = habit.streak;
                    }
                    
                    showCelebration(`Habit completed! ${habit.streak} day streak! üî•`);
                    updateHabitList();
                    updateStats();
                    saveData();
                }
            }
        }

        function deleteHabit(habitId) {
            appState.habits = appState.habits.filter(h => h.id !== habitId);
            updateHabitList();
            saveData();
        }

        function updateHabitList() {
            const habitList = document.getElementById('habit-list');
            habitList.innerHTML = '';

            appState.habits.forEach(habit => {
                const div = document.createElement('div');
                div.className = 'habit-item';
                
                const today = new Date().toDateString();
                const lastCompleted = habit.lastCompleted ? new Date(habit.lastCompleted).toDateString() : null;
                const completedToday = lastCompleted === today;
                
                div.innerHTML = `
                    <div>
                        <strong>${habit.text}</strong>
                        ${completedToday ? '<span style="color: var(--secondary); margin-left: 10px;">‚úì Done today</span>' : ''}
                    </div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span class="habit-streak">${habit.streak} days</span>
                        ${!completedToday ? `<button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="completeHabit(${habit.id})">Complete</button>` : ''}
                        <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="deleteHabit(${habit.id})">Delete</button>
                    </div>
                `;
                habitList.appendChild(div);
            });
        }

        // Quote system
        function displayRandomQuote() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quote-text').textContent = `"${randomQuote.text}"`;
            document.getElementById('quote-author').textContent = `- ${randomQuote.author}`;
        }

        function newQuote() {
            displayRandomQuote();
        }

        // Statistics
        function updateStats() {
            document.getElementById('total-study-time').textContent = appState.stats.studyTime.toFixed(1);
            document.getElementById('completed-tasks').textContent = appState.stats.completedTasks;
            document.getElementById('habit-streak').textContent = appState.stats.bestStreak;
            
            const completedToday = appState.tasks.filter(t => t.completed).length;
            const totalToday = appState.tasks.length;
            const productivityScore = totalToday > 0 ? Math.round((completedToday / totalToday) * 100) : 0;
            document.getElementById('productivity-score').textContent = productivityScore + '%';
        }

        // Celebration modal
        function showCelebration(message) {
            document.getElementById('celebration-message').textContent = message;
            document.getElementById('celebration-modal').classList.add('active');
        }

        function closeCelebration() {
            document.getElementById('celebration-modal').classList.remove('active');
        }

        // Data persistence
        function saveData() {
            saveToLocalStorage('productivityDashboard', appState);
        }

        function loadData() {
            const savedData = loadFromLocalStorage('productivityDashboard');
            if (savedData) {
                appState = { ...appState, ...savedData };
                
                // Convert date strings back to Date objects where necessary
                appState.tasks = appState.tasks.map(task => ({
                    ...task,
                    createdAt: new Date(task.createdAt)
                }));
                
                appState.habits = appState.habits.map(habit => ({
                    ...habit,
                    createdAt: new Date(habit.createdAt),
                    lastCompleted: habit.lastCompleted ? new Date(habit.lastCompleted) : null
                }));

                appState.notes = (appState.notes || []).map(note => ({
                    ...note,
                    createdAt: new Date(note.createdAt)
                }));
                
                // Ensure all required properties exist
                if (!appState.stats.dailyStudyTimes) appState.stats.dailyStudyTimes = {};
                if (!appState.stats.todaysPomodoroSessions) appState.stats.todaysPomodoroSessions = 0;
                if (!appState.notes) appState.notes = [];
                if (!appState.achievements) appState.achievements = { firstTask: false, fivePomodoros: false, weekStreak: false, perfectDay: false };
                if (!appState.focusSound) appState.focusSound = { current: null, audio: null };
                
                // Apply dark mode if saved
                if (appState.darkMode) {
                    document.body.setAttribute('data-theme', 'dark');
                    document.querySelector('.dark-toggle').textContent = '‚òÄÔ∏è';
                }
            }
        }

        // Achievement system
        function checkAchievements() {
            const achievements = [
                {
                    key: 'firstTask',
                    condition: () => appState.stats.completedTasks >= 1,
                    badge: 'üéØ',
                    title: 'First Steps',
                    desc: 'Complete your first task',
                    target: 1
                },
                {
                    key: 'fivePomodoros',
                    condition: () => appState.stats.todaysPomodoroSessions >= 5,
                    badge: 'üçÖ',
                    title: 'Pomodoro Master',
                    desc: 'Complete 5 Pomodoro sessions in a day',
                    target: 5
                },
                {
                    key: 'weekStreak',
                    condition: () => appState.stats.bestStreak >= 7,
                    badge: 'üî•',
                    title: 'Week Warrior',
                    desc: 'Maintain a 7-day habit streak',
                    target: 7
                },
                {
                    key: 'perfectDay',
                    condition: () => {
                        const completedTasks = appState.tasks.filter(t => t.completed).length;
                        const totalTasks = appState.tasks.length;
                        return totalTasks >= 3 && completedTasks === totalTasks && appState.stats.todaysPomodoroSessions >= 2;
                    },
                    badge: '‚≠ê',
                    title: 'Perfect Day',
                    desc: 'Complete all tasks (3+) and 2+ Pomodoros',
                    target: 1
                }
            ];

            achievements.forEach(achievement => {
                if (!appState.achievements[achievement.key] && achievement.condition()) {
                    appState.achievements[achievement.key] = true;
                    showCelebration(`üéâ Achievement Unlocked: ${achievement.title}! ${achievement.badge}`);
                }
            });

            updateAchievementDisplay();
        }

        function updateAchievementDisplay() {
            const unlockedAchievements = Object.keys(appState.achievements).filter(key => appState.achievements[key]);
            const totalAchievements = Object.keys(appState.achievements).length;
            
            // Find current achievement to display
            let currentAchievement = null;
            let progress = 0;
            
            if (appState.stats.completedTasks === 0) {
                currentAchievement = { badge: 'üéØ', title: 'Getting Started', desc: 'Complete your first task to unlock achievements!', current: 0, target: 1 };
            } else if (!appState.achievements.firstTask) {
                currentAchievement = { badge: 'üéØ', title: 'First Steps', desc: 'Complete your first task', current: Math.min(appState.stats.completedTasks, 1), target: 1 };
                progress = (Math.min(appState.stats.completedTasks, 1) / 1) * 100;
            } else if (!appState.achievements.fivePomodoros) {
                currentAchievement = { badge: 'üçÖ', title: 'Pomodoro Master', desc: 'Complete 5 Pomodoro sessions in a day', current: Math.min(appState.stats.todaysPomodoroSessions, 5), target: 5 };
                progress = (Math.min(appState.stats.todaysPomodoroSessions, 5) / 5) * 100;
            } else if (!appState.achievements.weekStreak) {
                currentAchievement = { badge: 'üî•', title: 'Week Warrior', desc: 'Maintain a 7-day habit streak', current: Math.min(appState.stats.bestStreak, 7), target: 7 };
                progress = (Math.min(appState.stats.bestStreak, 7) / 7) * 100;
            } else if (!appState.achievements.perfectDay) {
                const completedTasks = appState.tasks.filter(t => t.completed).length;
                const totalTasks = appState.tasks.length;
                const tasksCondition = totalTasks >= 3 && completedTasks === totalTasks;
                const pomodoroCondition = appState.stats.todaysPomodoroSessions >= 2;
                
                currentAchievement = { 
                    badge: '‚≠ê', 
                    title: 'Perfect Day', 
                    desc: 'Complete all tasks (3+) and 2+ Pomodoros', 
                    current: (tasksCondition ? 1 : 0) + (pomodoroCondition ? 1 : 0), 
                    target: 2 
                };
                progress = ((tasksCondition ? 1 : 0) + (pomodoroCondition ? 1 : 0)) / 2 * 100;
            } else {
                currentAchievement = { badge: 'üèÜ', title: 'Achievement Master', desc: `Unlocked ${unlockedAchievements.length}/${totalAchievements} achievements!`, current: unlockedAchievements.length, target: totalAchievements };
                progress = (unlockedAchievements.length / totalAchievements) * 100;
            }
            
            document.getElementById('achievement-badge').textContent = currentAchievement.badge;
            document.getElementById('achievement-title').textContent = currentAchievement.title;
            document.getElementById('achievement-desc').textContent = currentAchievement.desc;
            document.getElementById('achievement-progress').style.width = progress + '%';
            document.getElementById('achievement-current').textContent = currentAchievement.current;
            document.getElementById('achievement-target').textContent = currentAchievement.target;
        }

        // Focus sounds functionality
        function playFocusSound(soundType) {
            // Stop current sound if playing
            if (appState.focusSound.audio) {
                appState.focusSound.audio.pause();
                appState.focusSound.audio = null;
            }

            // Sound descriptions and visual feedback
            const sounds = {
                rain: { name: 'üåßÔ∏è Gentle Rain', description: 'Soft rainfall sounds' },
                forest: { name: 'üå≤ Forest Ambience', description: 'Birds chirping and leaves rustling' },
                ocean: { name: 'üåä Ocean Waves', description: 'Calming wave sounds' },
                coffee: { name: '‚òï Coffee Shop', description: 'Ambient caf√© atmosphere' }
            };

            appState.focusSound.current = soundType;
            
            // Create a simple oscillator for demo purposes (since we can't load actual sound files)
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Different frequencies for different "sounds"
            const frequencies = { rain: 200, forest: 400, ocean: 150, coffee: 300 };
            oscillator.frequency.setValueAtTime(frequencies[soundType], audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.start();
            
            // Store reference for stopping
            appState.focusSound.audio = { stop: () => { oscillator.stop(); audioContext.close(); } };
            
            document.getElementById('current-sound').textContent = `Playing: ${sounds[soundType].name}`;
            showCelebration(`üéµ Now playing ${sounds[soundType].description}`);
            saveData();
        }

        function stopFocusSound() {
            if (appState.focusSound.audio) {
                appState.focusSound.audio.stop();
                appState.focusSound.audio = null;
                appState.focusSound.current = null;
                document.getElementById('current-sound').textContent = 'No sound playing';
                showCelebration('üîá Focus sound stopped');
                saveData();
            }
        }

        // Reset daily counters at start of new day
        function resetDailyCounters() {
            const today = getDateString();
            const lastActiveDate = loadFromLocalStorage('lastActiveDate');
            
            if (lastActiveDate && lastActiveDate !== today) {
                appState.stats.todaysPomodoroSessions = 0;
                saveToLocalStorage('lastActiveDate', today);
                saveData();
            } else if (!lastActiveDate) {
                saveToLocalStorage('lastActiveDate', today);
            }
        }

        // Enhanced init function
        function init() {
            loadData();
            updateUI();
            displayRandomQuote();
            updateStats();
            updateWeeklyChart();
            checkAchievements();
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
